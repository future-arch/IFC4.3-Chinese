#!/bin/bash
# IFC 4.3 中文版 - 快速同步命令
# 使用方法: cd deployment && ./sync [选项]

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
SYNC_SCRIPT="$SCRIPT_DIR/sync_from_source.py"

# 帮助信息
show_help() {
    cat << EOF
IFC 4.3 中文版 - 快速同步命令

使用方法:
  cd deployment
  ./sync                    # 检查待同步的更改
  ./sync check              # 检查待同步的更改
  ./sync auto               # 自动同步（检测+渲染+提交+推送）
  ./sync file <文件路径>     # 同步单个文件
  ./sync help               # 显示此帮助

示例:
  ./sync
  ./sync auto
  ./sync file /path/to/IfcTrimmedCurve.md

详细文档: SYNC_GUIDE.md
EOF
}

# 主逻辑
case "${1:-check}" in
    check)
        python3 "$SYNC_SCRIPT" --check
        ;;
    auto)
        python3 "$SYNC_SCRIPT" --auto
        ;;
    file)
        if [ -z "$2" ]; then
            echo "❌ 错误: 请提供文件路径"
            echo "使用方法: ./sync file <文件路径>"
            exit 1
        fi
        python3 "$SYNC_SCRIPT" --file "$2"
        ;;
    help|--help|-h)
        show_help
        ;;
    *)
        echo "❌ 未知选项: $1"
        echo ""
        show_help
        exit 1
        ;;
esac
